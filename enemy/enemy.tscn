[gd_scene load_steps=7 format=3 uid="uid://b71wgveipu153"]

[ext_resource type="Script" path="res://enemy/enemy.gd" id="1_8hquk"]
[ext_resource type="PackedScene" uid="uid://brkes6oa2ksbn" path="res://player/rig.tscn" id="2_kxoty"]
[ext_resource type="PackedScene" uid="uid://btnw4i1q6w0nr" path="res://player/health_component.tscn" id="3_jqpg3"]
[ext_resource type="PackedScene" uid="uid://be03ygq05v3r8" path="res://player/area_attack.tscn" id="4_512mf"]

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_yqm2y"]

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_kpb34"]

[node name="Enemy" type="CharacterBody3D"]
collision_layer = 9
script = ExtResource("1_8hquk")

[node name="HealthComponent" parent="." instance=ExtResource("3_jqpg3")]

[node name="CollisionShape3D" type="CollisionShape3D" parent="."]
shape = SubResource("CapsuleShape3D_yqm2y")

[node name="Rig" parent="." instance=ExtResource("2_kxoty")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -1, 0)

[node name="Skeleton3D" parent="Rig/CharacterRig/GameRig" index="0"]
bones/0/position = Vector3(1.42012e-14, 0.904144, -0.0481735)
bones/2/rotation = Quaternion(0.00271737, -0.00034219, 0.00321299, 0.999991)
bones/3/rotation = Quaternion(-0.0923446, -0.000326157, 0.00852267, 0.995691)
bones/4/rotation = Quaternion(0.273339, 1.51072e-08, 9.06388e-08, 0.961918)
bones/6/rotation = Quaternion(-0.160869, -1.17072e-07, -2.27619e-08, 0.986976)
bones/7/position = Vector3(-5.6088e-08, 0.904144, -0.0481735)
bones/8/position = Vector3(-5.7689e-08, 0.904144, -0.0481735)
bones/9/position = Vector3(0.131144, 0.970349, -0.0351291)
bones/9/rotation = Quaternion(0.993666, 0.0205497, -0.0311025, 0.106014)
bones/11/rotation = Quaternion(0.407623, -0.000698522, 0.00031195, 0.91315)
bones/13/rotation = Quaternion(-0.746166, 0.0118655, 0.0243808, 0.665207)
bones/15/position = Vector3(-0.131144, 0.970349, -0.0351291)
bones/15/rotation = Quaternion(0.974537, -0.00552724, 0.0274992, 0.222467)
bones/17/rotation = Quaternion(0.432634, 0.00322289, -0.00154667, 0.901563)
bones/19/rotation = Quaternion(-0.683112, -0.0281655, -0.00109636, 0.729769)
bones/21/position = Vector3(0.0251286, 1.434, 0.0449918)
bones/21/rotation = Quaternion(-0.480849, -0.263118, -0.409146, 0.729488)
bones/22/position = Vector3(0.190153, 1.47202, -0.0163399)
bones/22/rotation = Quaternion(0.0344106, -0.162048, 0.975109, -0.147371)
bones/23/rotation = Quaternion(1.23595e-07, -0.0285326, 2.09983e-08, 0.999593)
bones/24/rotation = Quaternion(0.327674, -0.028535, -0.0203807, 0.94414)
bones/46/position = Vector3(-0.0113635, 1.434, 0.0449918)
bones/46/rotation = Quaternion(-0.489762, 0.244161, 0.396503, 0.737092)
bones/47/position = Vector3(-0.172975, 1.47252, -0.0245678)
bones/47/rotation = Quaternion(-0.0409232, -0.1427, 0.975255, 0.163828)
bones/48/rotation = Quaternion(-3.43674e-08, 0.0368553, -1.4145e-07, 0.999321)
bones/49/rotation = Quaternion(0.364827, 0.0368558, 0.0287886, 0.9299)
bones/71/position = Vector3(0.127191, 1.35381, -0.0253372)
bones/71/rotation = Quaternion(1.98494e-08, 0.60515, 0.796112, -4.61192e-08)
bones/72/position = Vector3(-0.113426, 1.35381, -0.0253372)
bones/72/rotation = Quaternion(1.9848e-08, 0.605173, 0.796094, -4.61199e-08)

[node name="Knight_02" parent="Rig/CharacterRig/GameRig/Skeleton3D" index="1"]
visible = false

[node name="Villager_02" parent="Rig/CharacterRig/GameRig/Skeleton3D" index="3"]
visible = true

[node name="RightHandBone" parent="Rig" index="2"]
transform = Transform3D(-0.962343, -0.2708, -0.023716, 0.230857, -0.860217, 0.454678, -0.143528, 0.432082, 0.89034, -0.346791, 0.998566, 0.00279946)

[node name="LeftHandBone" parent="Rig" index="3"]
transform = Transform3D(-0.970513, 0.239108, 0.0305222, -0.215017, -0.915975, 0.338758, 0.108957, 0.322206, 0.940378, 0.346963, 0.983565, -0.026069)

[node name="PlayerDetector" type="ShapeCast3D" parent="Rig"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1, 0)
shape = SubResource("CapsuleShape3D_kpb34")
target_position = Vector3(0, 0, 1)
collision_mask = 4

[node name="AreaAttack" parent="Rig" instance=ExtResource("4_512mf")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1, 1)
collision_mask = 4

[connection signal="defeat" from="HealthComponent" to="." method="_on_health_component_defeat"]
[connection signal="heavy_attack" from="Rig" to="." method="_on_rig_heavy_attack"]

[editable path="Rig"]
[editable path="Rig/CharacterRig"]
