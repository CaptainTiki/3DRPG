[gd_scene load_steps=9 format=3 uid="uid://c65uqhkycx504"]

[ext_resource type="Script" path="res://player/player.gd" id="1_kly4h"]
[ext_resource type="Script" path="res://player/smooth_camera_arm.gd" id="2_a14m4"]
[ext_resource type="PackedScene" uid="uid://btnw4i1q6w0nr" path="res://player/health_component.tscn" id="2_c86bi"]
[ext_resource type="PackedScene" uid="uid://brkes6oa2ksbn" path="res://player/rig.tscn" id="3_fah68"]
[ext_resource type="PackedScene" uid="uid://ban384vkt3irv" path="res://player/dash.tscn" id="3_q5n1i"]
[ext_resource type="Script" path="res://player/attack_raycast.gd" id="4_x82k4"]
[ext_resource type="PackedScene" uid="uid://be03ygq05v3r8" path="res://player/area_attack.tscn" id="6_ti7tt"]

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_qvtay"]

[node name="Player" type="CharacterBody3D"]
collision_layer = 5
script = ExtResource("1_kly4h")

[node name="HealthComponent" parent="." instance=ExtResource("2_c86bi")]

[node name="Dash" parent="." node_paths=PackedStringArray("player") instance=ExtResource("3_q5n1i")]
player = NodePath("..")

[node name="CollisionShape3D" type="CollisionShape3D" parent="."]
shape = SubResource("CapsuleShape3D_qvtay")

[node name="SmoothCameraArm" type="SpringArm3D" parent="." node_paths=PackedStringArray("target")]
transform = Transform3D(1, 0, 0, 0, 0.906308, 0.422618, 0, -0.422618, 0.906308, 0, 0, 0)
spring_length = 4.0
script = ExtResource("2_a14m4")
target = NodePath("../HorizontalPivot/VerticalPivot")

[node name="Camera3D" type="Camera3D" parent="SmoothCameraArm"]

[node name="HorizontalPivot" type="Node3D" parent="."]

[node name="VerticalPivot" type="Node3D" parent="HorizontalPivot"]

[node name="RigPivot" type="Node3D" parent="."]

[node name="Rig" parent="RigPivot" instance=ExtResource("3_fah68")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -1, 0)

[node name="Skeleton3D" parent="RigPivot/Rig/CharacterRig/GameRig" index="0"]
bones/0/position = Vector3(4.44089e-15, 0.910723, -0.0481736)
bones/2/rotation = Quaternion(0.00692238, -0.000274038, 0.0032111, 0.999971)
bones/3/rotation = Quaternion(-0.0885312, -0.000276535, 0.00852485, 0.996037)
bones/4/rotation = Quaternion(0.269863, 1.44024e-08, 9.16637e-08, 0.962899)
bones/6/rotation = Quaternion(-0.16522, -1.17571e-07, -1.96957e-08, 0.986257)
bones/7/position = Vector3(-3.94473e-08, 0.910723, -0.0481734)
bones/8/position = Vector3(-5.21354e-08, 0.910723, -0.0481735)
bones/9/position = Vector3(0.131144, 0.976927, -0.0351291)
bones/9/rotation = Quaternion(0.994306, 0.0202165, -0.0312634, 0.0998497)
bones/11/rotation = Quaternion(0.393525, -0.000694612, 0.000297453, 0.919314)
bones/13/rotation = Quaternion(-0.740115, 0.0118431, 0.0243581, 0.671935)
bones/15/position = Vector3(-0.131144, 0.976927, -0.0351291)
bones/15/rotation = Quaternion(0.975939, -0.005254, 0.0276885, 0.216216)
bones/17/rotation = Quaternion(0.41987, 0.00314734, -0.00145614, 0.907578)
bones/19/rotation = Quaternion(-0.677634, -0.0281356, -0.00148189, 0.734859)
bones/21/position = Vector3(0.0251286, 1.44023, 0.0473641)
bones/21/rotation = Quaternion(-0.469572, -0.26761, -0.417442, 0.730499)
bones/22/position = Vector3(0.191565, 1.47925, -0.00938073)
bones/22/rotation = Quaternion(0.0200879, -0.164195, 0.97551, -0.144975)
bones/23/rotation = Quaternion(6.68754e-08, -0.0401047, 1.06742e-08, 0.999196)
bones/24/rotation = Quaternion(0.354339, -0.0403725, -0.0221212, 0.933983)
bones/46/position = Vector3(-0.0113635, 1.44023, 0.0473641)
bones/46/rotation = Quaternion(-0.468887, 0.266589, 0.417449, 0.731308)
bones/47/position = Vector3(-0.177697, 1.47952, -0.00953081)
bones/47/rotation = Quaternion(-0.00757566, -0.148215, 0.976084, 0.158857)
bones/48/rotation = Quaternion(-3.76021e-08, 0.0591089, 5.78919e-08, 0.998252)
bones/49/rotation = Quaternion(0.395389, 0.0592317, 0.027766, 0.916181)
bones/71/position = Vector3(0.127191, 1.36131, -0.0243911)
bones/71/rotation = Quaternion(2.03461e-08, 0.59787, 0.801593, -4.58329e-08)
bones/72/position = Vector3(-0.113426, 1.36131, -0.0243911)
bones/72/rotation = Quaternion(2.03461e-08, 0.59787, 0.801593, -4.58328e-08)

[node name="AnimationTree" parent="RigPivot/Rig" index="1"]
parameters/MoveSpace/blend_position = -1.06245

[node name="RightHandBone" parent="RigPivot/Rig" index="2"]
transform = Transform3D(-0.962395, -0.27063, -0.0235641, 0.220166, -0.827859, 0.515924, -0.159132, 0.491335, 0.85631, -0.35147, 1.01389, 0.0325181)

[node name="LeftHandBone" parent="RigPivot/Rig" index="3"]
transform = Transform3D(-0.970487, 0.239199, 0.0306242, -0.208159, -0.895045, 0.394416, 0.121754, 0.376401, 0.918422, 0.348398, 0.996246, -0.00561808)

[node name="RayAttatchment" type="BoneAttachment3D" parent="RigPivot/Rig"]
transform = Transform3D(-0.962395, -0.27063, -0.0235641, 0.220166, -0.827859, 0.515924, -0.159132, 0.491335, 0.85631, -0.35147, 1.01389, 0.0325181)
bone_name = "DEF-hand.R"
bone_idx = 51
use_external_skeleton = true
external_skeleton = NodePath("../CharacterRig/GameRig/Skeleton3D")

[node name="AttackRaycast" type="RayCast3D" parent="RigPivot/Rig/RayAttatchment"]
unique_name_in_owner = true
transform = Transform3D(0.991329, -0.123189, -0.0457463, 0.014769, -0.241471, 0.970295, -0.130576, -0.962557, -0.237557, -0.0520863, 0.0866758, 0.00896785)
collision_mask = 8
script = ExtResource("4_x82k4")

[node name="AreaAttack" parent="RigPivot" instance=ExtResource("6_ti7tt")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 1)
collision_mask = 8

[connection signal="defeat" from="HealthComponent" to="." method="_on_health_component_defeat"]
[connection signal="heavy_attack" from="RigPivot/Rig" to="." method="_on_rig_heavy_attack"]

[editable path="RigPivot/Rig"]
[editable path="RigPivot/Rig/CharacterRig"]
